<?xml version="1.0" encoding="UTF-8"?>



<routes xmlns="http://camel.apache.org/schema/spring" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">

    <route id="arm_to_esp">
        <from uri="kafka:arm.to"/>
        <log message="message for arm was get: ${headers} ${body}" loggingLevel="DEBUG"/>
        <log message="message for arm was get: Topic: ${header.kafka.TOPIC} Partition: ${header.kafka.PARTITION_ID} Offset: ${header.kafka.OFFSET} " loggingLevel="INFO"/>



        <onException>
            <exception>org.apache.camel.processor.validation.SchemaValidationException</exception>
            <log message="Problems with validate" loggingLevel="ERROR"/>
        </onException>

        <onException>
            <exception>org.springframework.jms.IllegalStateException</exception>
            <redeliveryPolicy maximumRedeliveries="3"/>
            <log message="Problems with sending message in mq from kafka" loggingLevel="ERROR"/>
        </onException>

        <onException>
            <exception>java.lang.Exception</exception>
            <log message="Other problems" loggingLevel="ERROR"/>
        </onException>




        <to uri="validator:xsd/esp_to_arm.xsd"/>
        <to uri="jms:DEV.QUEUE.1"/>



    </route>
</routes>
